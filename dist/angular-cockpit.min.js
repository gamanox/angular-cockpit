!function(a,b,c){"use strict";return a.module("angular-cockpit.factories",[]).factory("$cockpitFactory",["$q","$log",function(b,d){return{load:function(e,f,g){var h=b.defer();return c.request("/collections/get/"+e,{filter:f,sort:g}).success(function(b){a.isArray(b)?h.resolve(b):h.reject(b)}).fail(function(a,b){d.error(a,b),h.reject(a)}),h.promise},thumbs:function(e,f,g){var h=b.defer();return c.request("/mediamanager/thumbnails",{images:e,w:f,h:g,options:{quality:100,mode:"best_fit"}}).success(function(b){a.isObject(b)?h.resolve(b):h.reject(b)}).fail(function(a,b){d.error(a,b),h.reject(a)}),h.promise},i18n:function(b,c,d){var e={};return b&&b.hasOwnProperty(c)?(a.forEach(d,function(a){var d=c+"_"+a;b.hasOwnProperty(d)?e[a]=b[d]:e[a]=b[c]}),e):e}}}]).factory("$imageFactory",["$q","$timeout","$log",function(c,d,e){return{loadImages:function(f){return function(c,g){function h(a){b(new Image).prop("src",a).on("load",function(a){g.push(a.target.src),j&&g.length===i&&c.resolve(g)}).on("error",function(b,d){e.error(d),c.reject(a)})}var i=0,j=!1;return a.forEach(f,function(a){d(function(){h(a)}),i++}),j=!0,c.promise}(c.defer(),[])}}}])}(angular,jQuery,Cockpit),function(a,b){"use strict";return a.module("angular-cockpit.forms",[]).factory("$formFactory",["$q","$http","$log",function(a,c,d){return{submit:function(c){var e=a.defer(),f=document.getElementById(c),g=b(f).attr("action"),h=new XMLHttpRequest,i=new FormData(f);return h.onload=function(){200===h.status&&"false"!==h.responseText?(f.reset(),d.debug("Form "+c+" submit success"),e.resolve()):(d.warn("Form "+c+" submit failure"),e.reject())},h.open("POST",g,!0),h.send(i),e.promise}}}]).directive("cockpitForm",["$http",function(a){return{scope:{cockpitForm:"@"},link:function(c,d){a({method:"GET",url:"/forms/"+c.cockpitForm+".php"}).then(function(a){var e=b(String(a.data)),f=e.closest('form[name="'+c.cockpitForm+'"]'),g=f.attr("action"),h=f.find('input[name="__csrf"]').first();b(d).attr("action",g).prepend(h)})}}}])}(angular,jQuery),function(a){"use strict";return a.module("angular-cockpit",["angular-cockpit.factories","angular-cockpit.forms"])}(angular);